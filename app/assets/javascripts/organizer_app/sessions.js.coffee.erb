module = angular.module('organizer.sessions', [])

module.service 'Sessions', [
  '$resource', 'scheduleId',
  ($resource, scheduleId) ->
    Session = $resource('/api/schedules/:scheduleId/sessions/:sessionId',
                        {scheduleId: '@scheduleId', sessionId: '@id'})
    @all = []
    Session.query scheduleId: scheduleId, (sessions) =>
      for session in sessions
        @all.push session

    @build = ->
      new Session scheduleId: scheduleId

    @create = (newSession) ->
      newSession.$save =>
        @all.push newSession

    return
]
